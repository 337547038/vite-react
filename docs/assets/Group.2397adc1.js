import{r as l,a as b,c as v,p as y,j as L}from"./index.191d5033.js";import{a as I}from"./contextForm.5bd57fda.js";import{o as V}from"./index.4eedf3c9.js";const N=l.exports.forwardRef((e,m)=>{const i=l.exports.useContext(I),n=i.disabled||e.disabled,o=()=>{let c=!1;return typeof e.checked=="boolean"?c=e.checked:e.value&&e.checked&&(c=e.checked.includes(e.value)),c},[r,x]=l.exports.useState(o());l.exports.useEffect(()=>{x(o())},[e.checked]);const g=()=>{if(e.beforeChange&&!e.beforeChange()||n)return;x(!r);const c=t(!r);e.onChange&&e.onChange(c),i.controlChange&&i.controlChange(c,"change")},t=c=>{let d=r;return c!==void 0&&(d=c),e.value?d?e.value:!1:d};return l.exports.useImperativeHandle(m,()=>({getValue:t})),b("label",{className:v(e.className,{[y+"-checkbox"]:!0,checked:r,disabled:n}),onClick:g,children:L("span",{children:[b("span",{className:v("checkbox-inner icon-check",{checked:r})}),e.children?b("span",{className:"checkbox-text",children:e.children}):b("span",{className:"checkbox-text",children:e.label})]})})});N.displayName="Checkbox";N.defaultProps={};const S=l.exports.forwardRef((e,m)=>{const{options:i=[],optionsKey:n={label:"label",value:"value"},max:o=0,min:r=0}=e,[x,g]=l.exports.useState(e.defaultValue||[]),t=l.exports.useRef(x),[c,d]=l.exports.useState({}),k=l.exports.useContext(I).disabled||e.disabled,E=(s,u)=>{if(k)return!1;if(u)t.current.push(u);else{let a=-1;for(const C in t.current)if(a++,t.current[C]===s[n.value]){t.current.splice(a,1);break}}const f=t.current.length;let h={};f>=o&&o>0&&e.options.forEach((a,C)=>{t.current.includes(a[n.value])||(h[C]=!0)}),f<=r&&r>0&&e.options.forEach((a,C)=>{t.current.includes(a[n.value])&&(h[C]=!0)}),d(h),e.onChange&&e.onChange(t.current)},j=()=>t.current,F=s=>{if(k||e.beforeChange&&!e.beforeChange())return!1;let u={};i.forEach((f,h)=>{const a=f[n.value];s?!f.disabled&&!t.current.includes(a)&&(o>0?t.current.length<o?t.current.push(a):u[h]=!0:t.current.push(a)):!f.disabled&&t.current.includes(a)&&(r>0?t.current.length>r?t.current=V(t.current,[a]):u[h]=!0:t.current=V(t.current,[a]))}),Object.keys(u).length>0&&d(u),g([...t.current])};return l.exports.useImperativeHandle(m,()=>({getValue:j,toggleSelect:F})),l.exports.useEffect(()=>{g([...e.defaultValue||[]])},[e.defaultValue]),b("div",{className:v(`${y}-checkbox-group`,e.className),children:i.map((s,u)=>b(N,{value:s[n.value],checked:x.includes(s[n.value]),label:s[n.label]||s[n.value],disabled:k||c[u]||s.disabled,className:s.class,beforeChange:e.beforeChange,onChange:E.bind(globalThis,s)},u))})});S.displayName="CheckboxGroup";export{N as C,S as a};
