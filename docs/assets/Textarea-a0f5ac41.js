import{r as a,j as g,c as w,p as C}from"./index-eab8b3d4.js";import{a as T}from"./contextForm-cfeffa56.js";import{o as L,d as R}from"./index-a427ff8b.js";const d=a.forwardRef((e,N)=>{const{maxLength:m=0,autoHeight:x=!0}=e,[n,h]=a.useState(e.defaultValue),o=a.useRef(null),V=()=>n,b=()=>{var t;(t=o.current)==null||t.focus()},j=()=>{h("")};a.useImperativeHandle(N,()=>({getValue:V,focus:b,clear:j}));const l=a.useContext(T),f=l.disabled||e.disabled,y={width:e.width,height:e.height,minHeight:e.height,overflow:x?"hidden":"",maxHeight:e.maxHeight},[i,c]=a.useState(y),v=t=>{const{value:s}=t.target;h(s),e.onChange&&e.onChange(s,t),E(),l.controlChange&&l.controlChange(s,"change")},E=R(()=>{var t,s,H;if(x){const S=(((t=o.current)==null?void 0:t.offsetHeight)||0)-(((s=o.current)==null?void 0:s.clientHeight)||0),r=(((H=o.current)==null?void 0:H.scrollHeight)||0)+S,u=parseInt(e.maxHeight||"0",10)||0;u?r<u?c({...i,height:r+"px"}):c({...i,height:u+"px",overflow:"auto"}):c({...i,height:r+"px"})}},1e3);a.useEffect(()=>{h(e.defaultValue)},[e.defaultValue]);const I=L(e,["autoHeight","showWordLimit","defaultValue","maxHeight"]);return g.jsxs("div",{className:w(`${C}-textarea`,e.className),children:[g.jsx("textarea",{...I,ref:o,value:n,className:w(`${C}-input-control`,{disabled:f}),style:i,disabled:f,onChange:v}),e.showWordLimit&&m?g.jsxs("span",{className:"input-count",children:[n==null?void 0:n.length,"/",m]}):""]})});d.displayName="Textarea";d.defaultProps={width:"100%",height:"80px"};d.propTypes={};export{d as T};
