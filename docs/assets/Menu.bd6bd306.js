import{r as E,R as b,u as z,a,c as u,p as H,j as x}from"./index.085b3e07.js";import{o as R}from"./index.4eedf3c9.js";import{T as O}from"./Tooltip.bf037a8d.js";import{C as U}from"./CSSTransition.307c8829.js";const V=l=>{const{mode:i="vertical",trigger:r="hover",theme:N="light",liHeight:M=40}=l,[o,d]=E.exports.useState(l.openKeys||[]),t=b.useRef(o),[S,C]=E.exports.useState(l.selectedKey||""),L=z(),K=e=>{h(e,!0)},w=e=>{h(e,!1)},h=(e,s)=>{(r==="hover"&&i==="horizontal"||i==="vertical"&&l.collapse)&&y(e,s)},T=(e,s)=>{var c;(r==="click"||i==="vertical")&&y(e,!((c=t.current)!=null&&c.includes(e.key))),e.children||(C(e.key),l.onSelect&&l.onSelect(e),l.router&&L(e.key)),l.onClick&&l.onClick(e),s.stopPropagation()},y=(e,s)=>{var c;e.disabled||(s?e.children&&!((c=t.current)!=null&&c.includes(e.key))&&(t.current.push(e.key),d([...t.current])):(t.current=R(t.current,[e.key]),d([...t.current])))},f=()=>{d([]),t.current=[]};b.useEffect(()=>(r==="click"&&i==="horizontal"&&document.addEventListener("click",f,!1),()=>{r==="click"&&i==="horizontal"&&document.removeEventListener("click",f,!1)}),[]);const j=e=>{var s;return!e||e&&((s=t.current)==null?void 0:s.includes(e.key))},p=e=>e&&e.children?e.children.length*M+(e.childHeight||0):null,k=e=>{const s=e.getAttribute("data-height");s&&(e.style.height=s+"px",e.style.overflow="hidden"),e.style.display=""},g=e=>{e.style.height="",e.style.overflow=""},v=(e,s,c)=>a(U,{in:j(c),timeout:300,onEnter:k,onExit:k,onEntered:g,onExited:g,classNames:"menu",children:a("ul",{className:u("layer-"+s,{"is-child":c}),style:{display:c&&o.includes(c.key)?"block":""},"data-height":p(c),children:e.map(n=>x("li",{className:u(n.className,{disabled:n.disabled,"is-down":o.includes(n.key),selected:n.key===S}),onMouseEnter:()=>K(n),onMouseLeave:()=>w(n),onClick:T.bind(globalThis,n),children:[x("span",{className:"menu-title",children:[a(O,{content:n.label,direction:"right",x:15,disabled:!(s===0&&!n.children&&l.collapse),children:n.icon?a("i",{className:`icon icon-${n.icon}`}):""}),a("span",{className:"name",children:n.label}),n.children?a("i",{className:"icon-arrow"}):""]}),n.children?v(n.children,s+1,n):""]},n.key))})});return a("div",{style:l.style,className:u(`${H}-menu`,i,N,l.className,{collapse:l.collapse&&i==="vertical"}),children:v(l.items,0)})};export{V as M};
