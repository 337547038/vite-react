import{r as m,j as a,p as P,c as d}from"./index-eab8b3d4.js";import{S as k}from"./Option-3f9b748b.js";const T=c=>{const{pageSize:v=20,pagerCount:l=5,hideSinglePage:f=!1}=c,[e,x]=m.useState({active:c.current||1,goToPage:c.current||1,pageSizes:c.pageSizes||[],selectOptions:[],pagesTotal:[],pageStart:0,pageEnd:0}),i=Math.ceil(c.total/v),u=f&&i<=1;let j=c.total.toString();c.format&&(j=c.total.toString().replace(/(\d{1,3})(?=(?:\d{3})+(?!\d))/g,"$1,")),m.useEffect(()=>{var r,g;const t=[];e.pageSizes.forEach(S=>{t.push({label:`每页${S}条`,value:S+""})});const s=p(),n=parseInt((r=s.start)==null?void 0:r.toString(),10),h=parseInt((g=s.end)==null?void 0:g.toString(),10);x({...e,pagesTotal:s.showPages,selectOptions:t,pageStart:n,pageEnd:h})},[e.active]);const p=()=>{let t=0,s=i-1;const n=parseInt((l/2).toString(),10);if(e.active+n<i&&(s=e.active+n),e.active>=l?t=e.active-n:s=l>i?i:l,i-e.active<l){const g=i-l+1;t=g>t?t:g}t<2&&(t=2),s>=i-1&&(s=i-1);const h=[];let r=t;for(;r<=s;)h.push(r.toString()),r++;return{showPages:h,start:t,end:s}},o=(t,s)=>{if(s)return;console.log(t);let n=t;t>i&&(n=i),t<1&&(n=1),x({...e,active:n,goToPage:n}),c.onChange&&c.onChange(n)},C=t=>{c.changePageSizes&&c.changePageSizes(parseInt(t,10))},N=a.jsxs("div",{className:`${P}-page`,children:[c.showTotal?a.jsxs("div",{className:"total",children:["共",a.jsx("span",{children:j}),"条"]}):"",e.pageSizes.length>0?a.jsx(k,{defaultValue:v+"",options:e.selectOptions,onChange:C}):"",a.jsx("div",{className:"page-list",children:a.jsx("ul",{children:a.jsxs(a.Fragment,{children:[a.jsx("li",{children:a.jsx("a",{title:"上一页",className:d("prev",{disabled:e.active===1}),onClick:()=>o(e.active-1,e.active===1),children:"<"})}),a.jsx("li",{children:a.jsx("a",{title:"1",className:d({active:e.active===1}),onClick:()=>o(1,e.active===1),children:"1"})}),e.pageStart>2?a.jsx("li",{children:a.jsx("a",{title:`向前${l}页`,className:"jump-prev",onClick:()=>o(e.active-l)})}):"",e.pagesTotal.map((t,s)=>a.jsx("li",{children:a.jsx("a",{title:t.toString(),className:d({active:t===e.active.toString()}),onClick:()=>o(parseInt(t,10)),children:t})},s)),i>e.pageEnd+1?a.jsx("li",{children:a.jsx("a",{title:`向后${l}页`,className:"jump-next",onClick:()=>o(e.active+l)})}):"",i>1?a.jsx("li",{children:a.jsx("a",{title:i+"",className:d({active:e.active===i}),onClick:()=>o(i,e.active===i),children:i})}):"",a.jsx("li",{children:a.jsx("a",{title:"下一页",className:d("next",{disabled:i<=e.active}),onClick:()=>o(e.active+1,i<=e.active),children:">"})})]})})})]});return u?null:N};export{T as P};
