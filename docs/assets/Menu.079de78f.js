import{r as b,R as E,u as z,a as r,c as u,p as H,j as x}from"./index.95d8ce5f.js";import{o as R}from"./index.4eedf3c9.js";import{T as O}from"./Tooltip.2e41c463.js";import{C as U}from"./CSSTransition.6ccddacf.js";const V=l=>{const{mode:i="vertical",trigger:a="hover",theme:N="light",liHeight:M=40}=l,[o,d]=b.exports.useState(l.openKeys||[]),t=E.useRef(o),[S,C]=b.exports.useState(l.selectedKey||""),L=z(),K=e=>{h(e,!0)},w=e=>{h(e,!1)},h=(e,s)=>{(a==="hover"&&i==="horizontal"||i==="vertical"&&l.collapse)&&y(e,s)},T=(e,s)=>{var c;e.disabled||((a==="click"||i==="vertical")&&y(e,!((c=t.current)!=null&&c.includes(e.key))),e.children||(C(e.key),l.onSelect&&l.onSelect(e),l.router&&L(e.key)),l.onClick&&l.onClick(e),s.stopPropagation())},y=(e,s)=>{var c;e.disabled||(s?e.children&&!((c=t.current)!=null&&c.includes(e.key))&&(t.current.push(e.key),d([...t.current])):(t.current=R(t.current,[e.key]),d([...t.current])))},f=()=>{d([]),t.current=[]};E.useEffect(()=>(a==="click"&&i==="horizontal"&&document.addEventListener("click",f,!1),()=>{a==="click"&&i==="horizontal"&&document.removeEventListener("click",f,!1)}),[]);const j=e=>{var s;return!e||e&&((s=t.current)==null?void 0:s.includes(e.key))},p=e=>e&&e.children?e.children.length*M+(e.childHeight||0):null,k=e=>{const s=e.getAttribute("data-height");s&&(e.style.height=s+"px",e.style.overflow="hidden"),e.style.display=""},g=e=>{e.style.height="",e.style.overflow=""},v=(e,s,c)=>r(U,{in:j(c),timeout:300,onEnter:k,onExit:k,onEntered:g,onExited:g,classNames:"menu",children:r("ul",{className:u("layer-"+s,{"is-child":c}),style:{display:c&&o.includes(c.key)?"block":""},"data-height":p(c),children:e.map(n=>x("li",{className:u(n.className,{disabled:n.disabled,"is-down":o.includes(n.key),selected:n.key===S}),onMouseEnter:()=>K(n),onMouseLeave:()=>w(n),onClick:T.bind(globalThis,n),children:[x("span",{className:"menu-title",children:[r(O,{content:n.label,direction:"right",x:15,disabled:!(s===0&&!n.children&&l.collapse),children:n.icon?r("i",{className:`icon icon-${n.icon}`}):""}),r("span",{className:"name",children:n.label}),n.children?r("i",{className:"icon-arrow"}):""]}),n.children?v(n.children,s+1,n):""]},n.key))})});return r("div",{style:l.style,className:u(`${H}-menu`,i,N,l.className,{collapse:l.collapse&&i==="vertical"}),children:v(l.items,0)})};export{V as M};
