var p=Object.defineProperty,ee=Object.defineProperties;var te=Object.getOwnPropertyDescriptors;var H=Object.getOwnPropertySymbols;var le=Object.prototype.hasOwnProperty,oe=Object.prototype.propertyIsEnumerable;var M=(e,t,o)=>t in e?p(e,t,{enumerable:!0,configurable:!0,writable:!0,value:o}):e[t]=o,j=(e,t)=>{for(var o in t||(t={}))le.call(t,o)&&M(e,o,t[o]);if(H)for(var o of H(t))oe.call(t,o)&&M(e,o,t[o]);return e},O=(e,t)=>ee(e,te(t));import{r as a,a as c,c as w,p as i,j as S,b as ae}from"./index.449b2a60.js";import{B as P}from"./Button.cb734751.js";import{g as ie,a as ce,s as ne,b as se}from"./dom.0e399110.js";const me=e=>{const{zIndex:t=999,appendToBody:o=!0,modal:V=!0,closeModal:X=!0,showClose:Y=!0,autoClose:d=0,closeTips:z="S\u79D2\u540E\u81EA\u52A8\u5173\u95ED",icon:x=0}=e,[L,N]=a.exports.useState(e.visible),[D,q]=a.exports.useState({}),[s,G]=a.exports.useState({}),[u,T]=a.exports.useState(0),y=a.exports.useRef(null),C=a.exports.useRef(null),r=a.exports.useRef(0),[J,E]=a.exports.useState("");a.exports.useEffect(()=>{$(e.visible),e.visible&&d>0&&(r.current&&window.clearInterval(r.current),T(d))},[e.visible]),a.exports.useEffect(()=>(e.visible&&d>0&&(r.current=window.setInterval(()=>{console.log(u),u>1?T(u-1):(e.callback&&e.callback(f),f())},1e3)),()=>{r.current&&window.clearInterval(r.current)}),[u]),a.exports.useEffect(()=>{e.lockScroll&&G(O(j({},s),{scrollbar:ie(!0)}))},[]);const v=l=>{if(!X&&l==="modal")return!1;if(!e.autoClose&&l==="confirm"&&e.callback)return e.callback(f),!1;if(e.beforeClose&&!e.beforeClose(l,f))return!1;f(),e.onClose&&e.onClose()},$=l=>{let n=`dialog-${e.animation||"fade"}-exit-active`;l&&(N(!0),n=`dialog-${e.animation||"fade"}-enter-active`),E(n),window.setTimeout(()=>{l||N(!1),E("")},e.animationDuration||500)},f=()=>{d&&r.current&&window.clearInterval(r.current),$(!1),K(!1)},K=l=>{if(e.lockScroll){const{hasScroll:n,width:k}=s.scrollbar;n&&l&&(document.body.style.overflow="hidden",document.body.style.paddingRight=k+"px"),!l&&n&&(document.body.style.overflow="",document.body.style.paddingRight="")}},Q=l=>{l.stopPropagation()},U=l=>{if(e.move&&y.current){s.moveFlag=!1;let n=ce(y.current),k=l.pageX-n.left,Z=l.pageY-n.top;const _=ne();s.moveFlag=!0,document.onmousemove=R=>{var B,F;if(s.moveFlag){let g=R.pageX-k,h=R.pageY-Z-_;const b=se(),I=((B=C.current)==null?void 0:B.offsetHeight)||0,W=((F=C.current)==null?void 0:F.offsetWidth)||0;g<=0?g=0:g>b.width-W&&(g=b.width-W),h<=0?h=0:h>b.height-I&&(h=b.height-I),q({left:g+"px",top:h+"px"})}return!1},document.onmouseup=function(){document.onmousemove=null,document.onmouseup=null,s.moveFlag=!1}}};let m="";switch(x+""){case"1":m="success";break;case"2":m="failure";break;case"3":m="tips";break;default:m=x+""}const A=c("div",{className:w(`${i}-dialog-modal`,J,{modal:!V,center:e.center}),style:{zIndex:t,display:L?"":"none"},onClick:()=>{v("modal")},children:S("div",{ref:C,className:w(e.className,{[i+"-dialog"]:!0,[i+"-dialog-isAlert"]:e.isAlert}),style:{width:e.width,top:D.top,left:D.left,transitionDuration:s.moveFlag?"0s":""},onClick:Q,children:[Y?c("a",{className:`${i}-dialog-close icon-close`,onClick:()=>{v("close")}}):"",d>0?c("div",{className:`${i}-dialog-auto-close`,children:c("span",{children:z.replace("S",u.toString())})}):"",e.title?c("div",{className:w(`${i}-dialog-header`,{move:e.move}),onMouseDown:U,ref:y,children:e.title}):"",e.content||e.children?S("div",{style:{height:e.height},className:w({[i+"-dialog-alert"]:e.isAlert,[i+"-dialog-content"]:!0}),children:[x?c("i",{className:`icon-${m}`}):"",e.content?c("div",{className:i+"-dialog-text",children:e.content}):e.children]}):"",e.confirm||e.cancel||e.footer?S("div",{className:`${i}-dialog-footer`,children:[e.footer?e.footer:"",e.cancel?c(P,{type:"cancel",onClick:()=>{v("cancel")},children:e.cancel}):"",e.confirm?c(P,{"v-if":"confirm",type:"primary",onClick:()=>{v("confirm")},children:e.confirm}):""]}):""]})});return o?ae.createPortal(A,document.body):A};export{me as D};
