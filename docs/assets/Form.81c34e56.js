import{r as c,a as i}from"./index.ad206765.js";import{c as D}from"./index.926ca9c5.js";import{F as V,p as E}from"./contextForm.46e5e42c.js";import{o as N}from"./index.000cd54b.js";const g=c.exports.forwardRef((o,f)=>{const s=c.exports.useRef([]),F=()=>{const e=[];return s.current.forEach(r=>{e.push({prop:r.prop,value:r.getValue()})}),e},d=e=>{let r=[],n=s.current;e&&e.length>0&&(n=s.current.filter(u=>e.indexOf(u.prop)!==-1));const h=[];return new Promise((u,C)=>{n.forEach(t=>{t.validate().then(()=>{r.push("true"),m()}).catch(l=>{r.push(l),m()}),h.push({prop:t.prop,value:t.getValue()})});const m=()=>{if(r.length===n.length){const t=r.filter(l=>l!=="true");t.length>0?C(t):u(h)}}})},p=e=>{s.current.forEach(r=>{e&&(e==null?void 0:e.length)>0&&(e.includes(r.prop),r.clearTips())})},v=()=>{console.log("\u6062\u590D\u521D\u59CB\u503C\u5F00\u53D1\u4E2D..."),p()},x=e=>{console.log("\u5F00\u53D1\u4E2D...")};c.exports.useImperativeHandle(f,()=>({getValue:F,validate:d,clearValidate:p,resetForm:v,setValue:x}));const a=N(o,["children","className"]);return a.callback=e=>{s.current.push(e)},a.onChange=(e,r)=>{o.onChange&&o.onChange(e,r)},i(V.Provider,{value:a,children:i("form",{className:D(`${E}-form`,o.className),children:o.children})})});g.displayName="Form";g.defaultProps={showMessage:!0,required:!0,trigger:"change",rules:{}};export{g as F};
