var I=Object.defineProperty,O=Object.defineProperties;var $=Object.getOwnPropertyDescriptors;var N=Object.getOwnPropertySymbols;var w=Object.prototype.hasOwnProperty,b=Object.prototype.propertyIsEnumerable;var P=(t,n,i)=>n in t?I(t,n,{enumerable:!0,configurable:!0,writable:!0,value:i}):t[n]=i,v=(t,n)=>{for(var i in n||(n={}))w.call(n,i)&&P(t,i,n[i]);if(N)for(var i of N(n))b.call(n,i)&&P(t,i,n[i]);return t},S=(t,n)=>O(t,$(n));import{r as E,j as f,p as F,a as l,F as B,c as u}from"./index.462fc5a0.js";import{S as V}from"./Option.1947702e.js";const M=t=>{const{pageSize:n=20,pagerCount:i=5,hideSinglePage:x=!1}=t,[e,m]=E.exports.useState({active:t.current||1,goToPage:t.current||1,pageSizes:t.pageSizes||[],selectOptions:[],pagesTotal:[],pageStart:0,pageEnd:0}),c=Math.ceil(t.total/n),k=x&&c<=1;let p=t.total.toString();t.format&&(p=t.total.toString().replace(/(\d{1,3})(?=(?:\d{3})+(?!\d))/g,"$1,")),E.exports.useEffect(()=>{var g,d;const a=[];e.pageSizes.forEach(C=>{a.push({label:`\u6BCF\u9875${C}\u6761`,value:C+""})});const s=z(),o=parseInt((g=s.start)==null?void 0:g.toString(),10),h=parseInt((d=s.end)==null?void 0:d.toString(),10);m(S(v({},e),{pagesTotal:s.showPages,selectOptions:a,pageStart:o,pageEnd:h}))},[e.active]);const z=()=>{let a=0,s=c-1;const o=parseInt((i/2).toString(),10);if(e.active+o<c&&(s=e.active+o),e.active>=i?a=e.active-o:s=i>c?c:i,c-e.active<i){const d=c-i+1;a=d>a?a:d}a<2&&(a=2),s>=c-1&&(s=c-1);const h=[];let g=a;for(;g<=s;)h.push(g.toString()),g++;return{showPages:h,start:a,end:s}},r=(a,s)=>{if(s)return;console.log(a);let o=a;a>c&&(o=c),a<1&&(o=1),m(S(v({},e),{active:o,goToPage:o})),t.onChange&&t.onChange(o)},T=a=>{t.changePageSizes&&t.changePageSizes(parseInt(a,10))},j=f("div",{className:`${F}-page`,children:[t.showTotal?f("div",{className:"total",children:["\u5171",l("span",{children:p}),"\u6761"]}):"",e.pageSizes.length>0?l(V,{defaultValue:n+"",options:e.selectOptions,onChange:T}):"",l("div",{className:"page-list",children:l("ul",{children:f(B,{children:[l("li",{children:l("a",{title:"\u4E0A\u4E00\u9875",className:u("prev",{disabled:e.active===1}),onClick:()=>r(e.active-1,e.active===1),children:"<"})}),l("li",{children:l("a",{title:"1",className:u({active:e.active===1}),onClick:()=>r(1,e.active===1),children:"1"})}),e.pageStart>2?l("li",{children:l("a",{title:`\u5411\u524D${i}\u9875`,className:"jump-prev",onClick:()=>r(e.active-i)})}):"",e.pagesTotal.map((a,s)=>l("li",{children:l("a",{title:a.toString(),className:u({active:a===e.active.toString()}),onClick:()=>r(parseInt(a,10)),children:a})},s)),c>e.pageEnd+1?l("li",{children:l("a",{title:`\u5411\u540E${i}\u9875`,className:"jump-next",onClick:()=>r(e.active+i)})}):"",c>1?l("li",{children:l("a",{title:c+"",className:u({active:e.active===c}),onClick:()=>r(c,e.active===c),children:c})}):"",l("li",{children:l("a",{title:"\u4E0B\u4E00\u9875",className:u("next",{disabled:c<=e.active}),onClick:()=>r(e.active+1,c<=e.active),children:">"})})]})})})]});return k?null:j};export{M as P};
